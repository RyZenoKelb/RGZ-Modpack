// ==UserScript==
// @name         RGZ Modpack 1.0
// @description  Mope.io Gameplay Tweaker
// @version      1.0
// @author       RyZeno
// @match        *://*.mope.io/*
// @grant        unsafeWindow
// @icon         https://files.catbox.moe/a4oov6.gif
// @run-at       document-idle
// ==/UserScript==

// ==UserScript==
(()=>{"use strict";var e="undefined"!=typeof unsafeWindow?unsafeWindow:window,n=function(e,n){return localStorage.setItem("rgz_".concat(e),JSON.stringify(n))},t=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var t=localStorage.getItem("rgz_".concat(e));return t?JSON.parse(t):n}catch(e){return n}},a=function(){var e=document.getElementById("chatinput")||document.querySelector('input[type="text"]');return e&&document.activeElement===e},r={waterSpamEnabled:t("waterSpamToggle",!1),waterSpamKey:t("waterSpamKey","r"),objectsTransparencyKey:t("objectsTransparencyKey","y"),playerTransparencyKey:t("playerTransparencyKey","j"),lockEnabled:t("lockMouseToggle",!1),menuVisible:t("toggleMenu",!0),menuKey:t("menuKey","p"),draggingEnabled:t("dragToggle",!1),showNextXPEnabled:t("showNextXPToggle",!1),customWaterColor:t("waterColorValue","#4E66E4"),objectsTransparencyEnabled:t("objectsTransparencyToggle",!1),playerTransparencyEnabled:t("playerTransparencyToggle",!1),zoomEnabled:t("zoomEnabled",!1),displayWinsEnabled:t("displayWinsToggle",!1),allDragonsEnabled:t("allDragonsEnabled",!1),spinSpeedEnabled:t("spinSpeedEnabled",!1),spinSpeed:t("spinSpeed",120),angleMode:t("angleMode",1),uiThemeColor:t("uiThemeColor","#2196f3"),uiBackgroundOpacity:t("uiBackgroundOpacity",.85)},i={waterSpamInterval:null,waterSpamActive:!1,mouseLocked:!1,UI:{},currentNotificationTimeout:null,deltaTime:0,lastFrameTime:0,originalUpdateNick:null,winsDisplayInterval:null},o=new Image;o.src="https://mope.io/assets/s/0/skins/land/dragon/111/0/dragon.png";const s=function(){document.head.appendChild(Object.assign(document.createElement("style"),{innerText:"\n      @import url('https://fonts.googleapis.com/css2?family=Oxanium:wght@200..800&display=swap');\n\n      :root {\n        --theme-color: ".concat(r.uiThemeColor,";\n        --theme-color-dark: ").concat(r.uiThemeColor,"dd;\n        --theme-color-light: ").concat(r.uiThemeColor,"33;\n        --theme-color-lighter: ").concat(r.uiThemeColor,"11;\n        --bg-opacity: ").concat(r.uiBackgroundOpacity,";\n        --background-blur: 5px;\n        --border-radius: 12px;\n        --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n        --soft-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n        --button-transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);\n      }\n\n      /* Main Menu */\n      .rgz-container {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        z-index: 99999;\n        font-family: 'Oxanium', sans-serif;\n        width: 320px;\n        transition: var(--soft-transition);\n        will-change: transform, opacity;\n      }\n\n      .rgz-panel {\n        background-color: rgba(20, 22, 33, var(--bg-opacity));\n        backdrop-filter: blur(var(--background-blur));\n        -webkit-backdrop-filter: blur(var(--background-blur));\n        border-radius: var(--border-radius);\n        box-shadow: var(--box-shadow);\n        padding: 16px;\n        position: relative;\n        overflow: hidden;\n        border: 1px solid rgba(255, 255, 255, 0.1);\n      }\n\n      .rgz-panel::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 3px;\n        background: var(--theme-color);\n        background: linear-gradient(90deg, var(--theme-color) 0%, var(--theme-color-dark) 100%);\n        z-index: 1;\n      }\n\n      /* Header & Title */\n      .rgz-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 16px;\n        position: relative;\n      }\n\n      .rgz-title {\n        display: flex;\n        align-items: baseline;\n      }\n\n      .rgz-title-main {\n        font-size: 28px;\n        font-weight: 800;\n        color: var(--theme-color);\n        margin-right: 5px;\n        text-shadow: 0 0 10px rgba(33, 150, 243, 0.3);\n        letter-spacing: 0.5px;\n      }\n\n      .rgz-title-sub {\n        font-size: 18px;\n        font-weight: 600;\n        color: #fff;\n        opacity: 0.9;\n      }\n\n      .rgz-actions {\n        display: flex;\n        gap: 8px;\n      }\n\n      .rgz-action-btn {\n        background: none;\n        border: none;\n        color: rgba(255, 255, 255, 0.6);\n        cursor: pointer;\n        font-size: 20px;\n        width: 26px;\n        height: 26px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 6px;\n        transition: var(--button-transition);\n      }\n\n      .rgz-action-btn:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: var(--theme-color);\n      }\n\n      /* Navigation */\n      .rgz-nav {\n        display: flex;\n        margin-bottom: 16px;\n        background-color: rgba(0, 0, 0, 0.2);\n        border-radius: 8px;\n        padding: 4px;\n      }\n\n      .rgz-nav-btn {\n        flex: 1;\n        background: none;\n        border: none;\n        color: #fff;\n        padding: 8px 0;\n        font-size: 14px;\n        cursor: pointer;\n        border-radius: 6px;\n        font-weight: 500;\n        transition: var(--button-transition);\n        font-family: 'Oxanium', sans-serif;\n      }\n\n      .rgz-nav-btn:hover:not(.active) {\n        background-color: rgba(255, 255, 255, 0.08);\n      }\n\n      .rgz-nav-btn.active {\n        background-color: var(--theme-color);\n        color: #fff;\n        font-weight: 600;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n      }\n\n      /* Pages */\n      .rgz-page {\n        display: none;\n        max-height: 500px;\n        overflow-y: auto;\n        overflow-x: hidden;\n        padding-right: 5px;\n      }\n\n      .rgz-page::-webkit-scrollbar {\n        width: 4px;\n      }\n\n      .rgz-page::-webkit-scrollbar-track {\n        background: rgba(0, 0, 0, 0.2);\n        border-radius: 10px;\n      }\n\n      .rgz-page::-webkit-scrollbar-thumb {\n        background: var(--theme-color);\n        border-radius: 10px;\n      }\n\n      /* Feature Cards */\n      .rgz-feature {\n        background-color: rgba(255, 255, 255, 0.04);\n        border-radius: 10px;\n        padding: 12px 16px;\n        margin-bottom: 10px;\n        transition: var(--soft-transition);\n        border: 1px solid rgba(255, 255, 255, 0.05);\n      }\n\n      .rgz-feature:hover {\n        background-color: rgba(255, 255, 255, 0.06);\n        border-color: rgba(255, 255, 255, 0.08);\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n      }\n\n      .rgz-feature-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n\n      .rgz-feature-info {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .rgz-feature-title {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--theme-color);\n        margin-bottom: 3px;\n      }\n\n      .rgz-feature-desc {\n        font-size: 12px;\n        color: rgba(255, 255, 255, 0.6);\n        max-width: 200px;\n      }\n\n      .rgz-feature-content {\n        max-height: 0;\n        overflow: hidden;\n        transition: max-height 0.3s ease-out;\n      }\n\n      .rgz-feature.expanded .rgz-feature-content {\n        max-height: 200px;\n        margin-top: 12px;\n      }\n\n      /* Dropdown */\n      .rgz-dropdown {\n        background-color: rgba(0, 0, 0, 0.3);\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        border-radius: 6px;\n        color: #fff;\n        padding: 6px 10px;\n        font-size: 13px;\n        width: 100%;\n        font-family: 'Oxanium', sans-serif;\n        cursor: pointer;\n        transition: var(--soft-transition);\n        margin-top: 8px;\n        appearance: menulist;\n        -webkit-appearance: menulist;\n      }\n\n      .rgz-dropdown option {\n        background-color: rgba(20, 22, 33, 0.95);\n        color: white;\n        padding: 5px;\n        font-family: 'Oxanium', sans-serif;\n      }\n\n      .rgz-dropdown:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n        border-color: var(--theme-color);\n      }\n\n      .rgz-dropdown:focus {\n        outline: none;\n        border-color: var(--theme-color);\n        box-shadow: 0 0 0 2px var(--theme-color-lighter);\n      }\n\n      /* Toggle Switches */\n      .rgz-switch {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        height: 21px;\n      }\n\n      .rgz-switch input {\n        opacity: 0;\n        width: 0;\n        height: 0;\n      }\n\n      .rgz-slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(255, 255, 255, 0.2);\n        transition: .3s;\n        border-radius: 12px;\n      }\n\n      .rgz-slider:before {\n        position: absolute;\n        content: \"\";\n        height: 17px;\n        width: 17px;\n        left: 2px;\n        bottom: 2px;\n        background-color: white;\n        transition: .3s;\n        border-radius: 50%;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n      }\n\n      input:checked + .rgz-slider {\n        background-color: var(--theme-color);\n      }\n\n      input:focus + .rgz-slider {\n        box-shadow: 0 0 2px var(--theme-color);\n      }\n\n      input:checked + .rgz-slider:before {\n        transform: translateX(19px);\n      }\n\n      /* Color Picker and Text Inputs */\n      .rgz-color-picker {\n        -webkit-appearance: none;\n        width: 40px;\n        height: 25px;\n        padding: 0;\n        border: none;\n        border-radius: 6px;\n        background: none;\n        cursor: pointer;\n      }\n\n      .rgz-color-picker::-webkit-color-swatch {\n        border: none;\n        border-radius: 6px;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n      }\n\n      .rgz-text-input {\n        background-color: rgba(0, 0, 0, 0.3);\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        border-radius: 6px;\n        color: #fff;\n        padding: 6px 10px;\n        font-size: 13px;\n        width: 40px;\n        text-align: center;\n        font-family: 'Oxanium', sans-serif;\n        transition: var(--soft-transition);\n      }\n\n      .rgz-text-input:focus {\n        outline: none;\n        border-color: var(--theme-color);\n        box-shadow: 0 0 0 2px var(--theme-color-lighter);\n      }\n\n      /* Sliders */\n      .rgz-slider-container {\n        padding: 5px 5px 15px;\n        position: relative;\n      }\n\n      .rgz-slider-value {\n        position: absolute;\n        top: 28px;\n        background-color: var(--theme-color);\n        color: white;\n        font-size: 12px;\n        padding: 2px 6px;\n        border-radius: 10px;\n        min-width: 30px;\n        text-align: center;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n        z-index: 1;\n        transform: translateX(-50%);\n        pointer-events: none;\n      }\n\n      .rgz-slider-track {\n        width: 100%;\n        height: 6px;\n        -webkit-appearance: none;\n        background: rgba(255, 255, 255, 0.2);\n        border-radius: 5px;\n        outline: none;\n        cursor: pointer;\n      }\n\n      .rgz-slider-track::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        background: white;\n        cursor: pointer;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n        border: 2px solid var(--theme-color);\n      }\n\n      .rgz-slider-track::-moz-range-thumb {\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        background: white;\n        cursor: pointer;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n        border: 2px solid var(--theme-color);\n      }\n\n      .rgz-slider-labels {\n        display: flex;\n        justify-content: space-between;\n        margin-top: 3px;\n      }\n\n      .rgz-slider-label {\n        font-size: 10px;\n        color: rgba(255, 255, 255, 0.5);\n      }\n\n      /* Settings Section */\n      .rgz-settings-section {\n        border-top: 1px solid rgba(255, 255, 255, 0.05);\n        margin-top: 15px;\n        padding-top: 15px;\n      }\n\n      .rgz-settings-title {\n        font-size: 14px;\n        color: rgba(255, 255, 255, 0.8);\n        margin-bottom: 10px;\n        font-weight: 600;\n      }\n\n      .rgz-settings-row {\n        display: flex;\n        align-items: center;\n        margin-bottom: 10px;\n        gap: 10px;\n      }\n\n      .rgz-settings-label {\n        font-size: 13px;\n        color: rgba(255, 255, 255, 0.7);\n        flex: 1;\n      }\n\n      /* Theme Customization */\n      .rgz-theme-swatches {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n        margin-top: 10px;\n      }\n\n      .rgz-theme-swatch {\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        cursor: pointer;\n        border: 2px solid rgba(255, 255, 255, 0.3);\n        transition: transform 0.2s, border-color 0.2s;\n      }\n\n      .rgz-theme-swatch:hover {\n        transform: scale(1.1);\n      }\n\n      .rgz-theme-swatch.active {\n        border-color: white;\n        transform: scale(1.1);\n      }\n\n      /* Next XP Display */\n      #rgz-xp-display {\n        position: fixed;\n        top: 266px;\n        right: 5px;\n        color: white;\n        font-size: 13px;\n        font-family: 'Oxanium', sans-serif;\n        z-index: 9999;\n        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);\n        background-color: rgba(0, 0, 0, 0.5);\n        padding: 4px 8px;\n        border-radius: 5px;\n        backdrop-filter: blur(var(--background-blur));\n        -webkit-backdrop-filter: blur(var(--background-blur));\n      }\n\n      /* Notification System */\n      .rgz-notification {\n        position: fixed;\n        top: 60px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: rgba(0, 0, 0, 0.8);\n        color: white;\n        font-family: 'Oxanium', sans-serif;\n        font-weight: 500;\n        font-size: 14px;\n        padding: 10px 16px;\n        border-radius: 10px;\n        z-index: 999999;\n        pointer-events: none;\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n        max-width: 80%;\n        text-align: center;\n        transition: opacity 0.3s, transform 0.3s;\n        border-left: 4px solid var(--theme-color);\n        backdrop-filter: blur(var(--background-blur));\n        -webkit-backdrop-filter: blur(var(--background-blur));\n        opacity: 0;\n        display: none;\n      }\n\n      .rgz-notification.enabled {\n        border-left: 4px solid #00b09b;\n      }\n\n      .rgz-notification.disabled {\n        border-left: 4px solid #ff416c;\n      }\n\n      /* Settings panel */\n      .rgz-settings-panel {\n        display: none;\n        padding: 15px;\n        background-color: rgba(0, 0, 0, 0.3);\n        border-radius: 10px;\n        margin-bottom: 16px;\n        border: 1px solid rgba(255, 255, 255, 0.05);\n      }\n\n      /* Color palette */\n      .rgz-color-palette {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 6px;\n        margin-top: 8px;\n      }\n\n      .rgz-color-swatch {\n        width: 22px;\n        height: 22px;\n        border-radius: 4px;\n        cursor: pointer;\n        border: 2px solid rgba(255, 255, 255, 0.3);\n        transition: transform 0.2s, border-color 0.2s;\n      }\n\n      .rgz-color-swatch:hover {\n        transform: scale(1.1);\n        border-color: white;\n      }\n\n      @keyframes fadeIn {\n        from { opacity: 0; transform: translate(-50%, -20px); }\n        to { opacity: 1; transform: translate(-50%, 0); }\n      }\n\n      @keyframes fadeOut {\n        from { opacity: 1; transform: translate(-50%, 0); }\n        to { opacity: 0; transform: translate(-50%, -20px); }\n      }\n\n      /* Media Queries */\n      @media (max-height: 700px) {\n        .rgz-page {\n          max-height: 350px;\n        }\n      }\n    ")}))};var l=["#4E66E4","#3498db","#2980b9","#1abc9c","#16a085","#27ae60","#2ecc71","#8e44ad","#9b59b6","#f1c40f","#000000"],d=function(){var e=[document.getElementById("rgz-nav1"),document.getElementById("rgz-nav2"),document.getElementById("rgz-nav3")],n=[document.getElementById("rgzpage1"),document.getElementById("rgzpage2"),document.getElementById("rgzpage3")];e.some((function(e){return!e}))||n.some((function(e){return!e}))?setTimeout(d,500):e.forEach((function(t,a){t.onclick=function(){document.getElementById("rgz-settings-panel").style.display="none",n.forEach((function(e,n){e&&(e.style.display=a===n?"block":"none")})),e.forEach((function(e,n){e.className=a===n?"rgz-nav-btn active":"rgz-nav-btn"}))}}))};const c=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;i.UI.notification&&(i.currentNotificationTimeout&&(clearTimeout(i.currentNotificationTimeout),i.currentNotificationTimeout=null),i.UI.notification.className="rgz-notification",n&&i.UI.notification.classList.add(n),i.UI.notification.textContent=e,i.UI.notification.style.display="block",i.UI.notification.style.animation="",i.UI.notification.offsetWidth,i.UI.notification.style.animation="fadeIn 0.3s forwards",i.UI.notification.style.opacity="1",i.currentNotificationTimeout=setTimeout((function(){i.UI.notification.style.animation="fadeOut 0.3s forwards",i.currentNotificationTimeout=setTimeout((function(){i.UI.notification.style.display="none",i.UI.notification.style.opacity="0",i.currentNotificationTimeout=null}),300)}),t))};function p(e){if(i.UI.menu&&!(e.target.closest(".rgz-switch")||e.target.classList.contains("rgz-nav-btn")||e.target.classList.contains("rgz-action-btn")||["INPUT","BUTTON","SELECT"].includes(e.target.tagName))){var n=i.UI.menu,t=e.clientX,a=e.clientY,r=n.getBoundingClientRect(),o=r.left,s=r.top;"fixed"!==window.getComputedStyle(n).position&&(n.style.position="fixed");var l=t,d=a,c=!0,p=null;document.addEventListener("mousemove",u,{capture:!0}),document.addEventListener("mouseup",(function e(){c=!1,null!==p&&(cancelAnimationFrame(p),p=null),document.removeEventListener("mousemove",u,{capture:!0}),document.removeEventListener("mouseup",e);var t=n.getBoundingClientRect();o=t.left,s=t.top})),p=requestAnimationFrame(g),e.preventDefault()}function g(){c&&(n.style.left="".concat(o+(l-t),"px"),n.style.top="".concat(s+(d-a),"px"),n.style.right="auto",p=requestAnimationFrame(g))}function u(e){c&&(l=e.clientX,d=e.clientY,null===p&&(p=requestAnimationFrame(g)))}}function g(){var n=r.customWaterColor;"#000000"===n&&(n="#4E66E4"),void 0!==e.a0_0x37c9c3&&(e.a0_0x37c9c3=n),void 0!==e.a0_0x4b3dd4&&(e.a0_0x4b3dd4=n)}var u=function(){i.waterSpamInterval&&(clearInterval(i.waterSpamInterval),i.waterSpamInterval=null)};function b(n){a()||(n.deltaY<0?e.camzoom_n+=.1:e.camzoom_n>=.2&&(e.camzoom_n-=.1))}function m(){if(e.Animal&&e.Animal.prototype){var n=e.Animal.prototype.basicDrawSkinImg;e.Animal.prototype.basicDrawSkinImg=function(){if(r.allDragonsEnabled){var e=this.loadedSkinImg;this.loadedSkinImg=o,n.call(this),this.loadedSkinImg=e}else n.call(this)}}else setTimeout(m,1e3)}function y(){if(!i.originalUpdateNick)var n=setInterval((function(){e.Animal&&e.Animal.prototype.updateNick&&(clearInterval(n),console.log("[RGZ Modpack] 1v1 wins display activating..."),e.a0_0x4bbbf3=!0,i.originalUpdateNick=e.Animal.prototype.updateNick,e.Animal.prototype.updateNick=function(){if(this.flag_can1v1=!0,i.originalUpdateNick.apply(this,arguments),this.nickTXT&&!this.winsAddedInNick){var e="\n(wins:"+this.wins1v1+")";this.nickName&&(this.nickTXT.setText(this.nickName+e),this.winsAddedInNick=!0)}},i.winsDisplayInterval=setInterval((function(){try{for(var n in e.a0_0x4ca616){var t=e.a0_0x4ca616[n];t&&t.updateNick&&t.updateNick()}}catch(e){console.error("[RGZ Modpack] Error updating names:",e)}}),1e3),console.log("[RGZ Modpack] 1v1 wins display activated"))}),1e3)}function v(e,n){if(e&&n){var t=parseFloat(e.value),a=parseFloat(e.min)||0,r=(t-a)/((parseFloat(e.max)||100)-a)*100,i=Math.max(10,Math.min(90,r));n.style.left="".concat(i,"%")}}var f=null;function h(){if(void 0!==e.Animal&&e.Animal.prototype)try{r.playerTransparencyEnabled?(f||(f=e.Animal.prototype.getIdealOpacity),e.Animal.prototype.getIdealOpacity=function(){return.3}):f&&(e.Animal.prototype.getIdealOpacity=f)}catch(e){console.error("Error updating player transparency:",e)}else setTimeout(h,500)}function x(e){r.uiThemeColor=e,n("uiThemeColor",e),document.documentElement.style.setProperty("--theme-color",e),document.documentElement.style.setProperty("--theme-color-dark",e+"dd"),document.documentElement.style.setProperty("--theme-color-light",e+"33"),document.documentElement.style.setProperty("--theme-color-lighter",e+"11"),document.querySelectorAll(".rgz-theme-swatch").forEach((function(n){n.classList.remove("active"),n.dataset.color===e&&n.classList.add("active")}));var t=document.getElementById("uiThemeColorPicker");t&&(t.value=e)}var z=function(){i.UI.toggles={zoom:document.getElementById("zoomToggle"),allDragons:document.getElementById("allDragonsToggle"),waterSpam:document.getElementById("waterSpamToggle"),lock:document.getElementById("lockMouseToggle"),drag:document.getElementById("dragToggle"),xp:document.getElementById("showNextXPToggle"),displayWins:document.getElementById("displayWinsToggle"),spinSpeed:document.getElementById("spinSpeedToggle")},i.UI.inputs={waterSpamKey:document.getElementById("waterSpamKeyInput"),objectsTransparencyKey:document.getElementById("objectsTransparencyKeyInput"),playerTransparencyKey:document.getElementById("playerTransparencyKeyInput"),menuKey:document.getElementById("menuKeyInput"),waterColor:document.getElementById("waterColorPicker"),spinSpeedRange:document.getElementById("spinSpeedRange"),spinSpeedValue:document.getElementById("spinSpeedValue"),angleMode:document.getElementById("angleModeSelect"),themeColor:document.getElementById("uiThemeColorPicker"),backgroundOpacity:document.getElementById("opacityRange")},i.UI.containers={spinSpeed:document.getElementById("spinSpeedContainer")},i.UI.buttons={settings:document.getElementById("rgz-settings-btn")},i.UI.palettes={waterColor:document.getElementById("waterColorPalette")},i.UI.settingsPanel=document.getElementById("rgz-settings-panel"),x(r.uiThemeColor),document.querySelectorAll(".rgz-theme-swatch").forEach((function(e){e.dataset.color===r.uiThemeColor&&e.classList.add("active"),e.addEventListener("click",(function(){x(e.dataset.color),c("Theme color updated","enabled")}))})),i.UI.toggles.zoom&&(i.UI.toggles.zoom.checked=r.zoomEnabled),i.UI.toggles.allDragons&&(i.UI.toggles.allDragons.checked=r.allDragonsEnabled),i.UI.toggles.waterSpam&&(i.UI.toggles.waterSpam.checked=r.waterSpamEnabled),i.UI.toggles.lock&&(i.UI.toggles.lock.checked=r.lockEnabled),i.UI.toggles.drag&&(i.UI.toggles.drag.checked=r.draggingEnabled),i.UI.toggles.xp&&(i.UI.toggles.xp.checked=r.showNextXPEnabled),i.UI.toggles.displayWins&&(i.UI.toggles.displayWins.checked=r.displayWinsEnabled),i.UI.toggles.spinSpeed&&(i.UI.toggles.spinSpeed.checked=r.spinSpeedEnabled),i.UI.inputs.waterSpamKey&&(i.UI.inputs.waterSpamKey.value=r.waterSpamKey.toUpperCase()),i.UI.inputs.objectsTransparencyKey&&(i.UI.inputs.objectsTransparencyKey.value=r.objectsTransparencyKey.toUpperCase()),i.UI.inputs.playerTransparencyKey&&(i.UI.inputs.playerTransparencyKey.value=r.playerTransparencyKey.toUpperCase()),i.UI.inputs.menuKey&&(i.UI.inputs.menuKey.value=r.menuKey.toUpperCase()),i.UI.inputs.waterColor&&(i.UI.inputs.waterColor.value=r.customWaterColor),i.UI.inputs.angleMode&&(i.UI.inputs.angleMode.value=r.angleMode.toString()),i.UI.inputs.themeColor&&(i.UI.inputs.themeColor.value=r.uiThemeColor),i.UI.inputs.backgroundOpacity&&(i.UI.inputs.backgroundOpacity.value=100*r.uiBackgroundOpacity),i.UI.inputs.spinSpeedRange&&i.UI.inputs.spinSpeedValue&&v(i.UI.inputs.spinSpeedRange,i.UI.inputs.spinSpeedValue),i.UI.containers.spinSpeed&&(i.UI.containers.spinSpeed.style.display=r.spinSpeedEnabled?"block":"none"),r.draggingEnabled&&i.UI.menu&&(i.UI.menu.removeEventListener("mousedown",p),i.UI.menu.addEventListener("mousedown",p)),i.UI.buttons.settings&&i.UI.buttons.settings.addEventListener("click",(function(){i.UI.settingsPanel&&(i.UI.settingsPanel.style.display="block"===i.UI.settingsPanel.style.display?"none":"block")})),i.UI.palettes.waterColor&&i.UI.palettes.waterColor.querySelectorAll(".rgz-color-swatch").forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.color;r.customWaterColor=t,n("waterColorValue",t),i.UI.inputs.waterColor&&(i.UI.inputs.waterColor.value=t),g(),c("Water color updated","enabled")}))})),i.UI.toggles.zoom&&i.UI.toggles.zoom.addEventListener("change",(function(e){r.zoomEnabled=e.target.checked,n("zoomEnabled",r.zoomEnabled);var t=document.getElementById("gCanvas");t&&(r.zoomEnabled?t.addEventListener("wheel",b,!0):t.removeEventListener("wheel",b,!0)),c(r.zoomEnabled?"Zoom feature enabled":"Zoom feature disabled",r.zoomEnabled?"enabled":"disabled")})),i.UI.toggles.allDragons&&i.UI.toggles.allDragons.addEventListener("change",(function(e){r.allDragonsEnabled=e.target.checked,n("allDragonsEnabled",r.allDragonsEnabled),m(),c(r.allDragonsEnabled?"All Dragons feature enabled":"All Dragons feature disabled",r.allDragonsEnabled?"enabled":"disabled")})),i.UI.toggles.waterSpam&&i.UI.toggles.waterSpam.addEventListener("change",(function(e){r.waterSpamEnabled=e.target.checked,n("waterSpamToggle",r.waterSpamEnabled),r.waterSpamEnabled||u();var t=e.target.closest(".rgz-feature");t&&(r.waterSpamEnabled?t.classList.add("expanded"):t.classList.remove("expanded")),c(r.waterSpamEnabled?"Water spam enabled":"Water spam disabled",r.waterSpamEnabled?"enabled":"disabled")})),i.UI.toggles.lock&&i.UI.toggles.lock.addEventListener("change",(function(e){r.lockEnabled=e.target.checked,n("lockMouseToggle",r.lockEnabled),c(r.lockEnabled?"Mouse lock enabled":"Mouse lock disabled",r.lockEnabled?"enabled":"disabled")})),i.UI.toggles.drag&&i.UI.toggles.drag.addEventListener("change",(function(e){r.draggingEnabled=e.target.checked,n("dragToggle",r.draggingEnabled),i.UI.menu&&(i.UI.menu.removeEventListener("mousedown",p),r.draggingEnabled&&i.UI.menu.addEventListener("mousedown",p)),c(r.draggingEnabled?"UI dragging enabled":"UI dragging disabled",r.draggingEnabled?"enabled":"disabled")})),i.UI.toggles.xp&&i.UI.toggles.xp.addEventListener("change",(function(e){r.showNextXPEnabled=e.target.checked,n("showNextXPToggle",r.showNextXPEnabled),i.UI.xpDisplay&&(i.UI.xpDisplay.style.display=r.showNextXPEnabled?"block":"none"),c(r.showNextXPEnabled?"XP display enabled":"XP display disabled",r.showNextXPEnabled?"enabled":"disabled")})),i.UI.toggles.displayWins&&i.UI.toggles.displayWins.addEventListener("change",(function(t){r.displayWinsEnabled=t.target.checked,n("displayWinsToggle",r.displayWinsEnabled),r.displayWinsEnabled?y():function(){if(i.originalUpdateNick){if(console.log("[RGZ Modpack] Stopping display wins..."),i.winsDisplayInterval&&(clearInterval(i.winsDisplayInterval),i.winsDisplayInterval=null),e.a0_0x4bbbf3=!1,e.Animal&&e.Animal.prototype){var n=i.originalUpdateNick;e.Animal.prototype.updateNick=n,i.originalUpdateNick=null,setTimeout((function(){try{if(console.log("[RGZ Modpack] Resetting all nicknames..."),e.a0_0x4ca616){for(var n in e.a0_0x4ca616){var t=e.a0_0x4ca616[n];t&&(t.winsAddedInNick=!1)}for(var a in e.a0_0x4ca616){var r=e.a0_0x4ca616[a];if(r&&r.updateNick&&"function"==typeof r.updateNick)try{r.updateNick()}catch(e){console.error("[RGZ Modpack] Error updating animal nick:",e)}}}}catch(e){console.error("[RGZ Modpack] Error resetting names:",e)}}),100)}console.log("[RGZ Modpack] 1v1 wins display deactivated")}}(),c(r.displayWinsEnabled?"1v1 wins display enabled":"1v1 wins display disabled",r.displayWinsEnabled?"enabled":"disabled")})),i.UI.toggles.spinSpeed&&i.UI.toggles.spinSpeed.addEventListener("change",(function(e){r.spinSpeedEnabled=e.target.checked,n("spinSpeedEnabled",r.spinSpeedEnabled);var t=e.target.closest(".rgz-feature");t&&(r.spinSpeedEnabled?t.classList.add("expanded"):t.classList.remove("expanded")),c(r.spinSpeedEnabled?"Spin speed control enabled":"Spin speed control disabled",r.spinSpeedEnabled?"enabled":"disabled")})),i.UI.inputs.waterSpamKey&&i.UI.inputs.waterSpamKey.addEventListener("input",(function(e){var t=e.target.value.toLowerCase();/^[a-z]$/.test(t)&&(r.waterSpamKey=t,n("waterSpamKey",r.waterSpamKey),c("Water spam key set to '".concat(t.toUpperCase(),"'"),"enabled"))})),i.UI.inputs.objectsTransparencyKey&&i.UI.inputs.objectsTransparencyKey.addEventListener("input",(function(e){var t=e.target.value.toLowerCase();/^[a-z]$/.test(t)&&(r.objectsTransparencyKey=t,n("objectsTransparencyKey",r.objectsTransparencyKey),window.dispatchEvent(new CustomEvent("rgz-update-objects-transparency-key",{detail:{key:r.objectsTransparencyKey}})),c("Objects transparency key set to '".concat(t.toUpperCase(),"'"),"enabled"))})),i.UI.inputs.playerTransparencyKey&&i.UI.inputs.playerTransparencyKey.addEventListener("input",(function(e){var t=e.target.value.toLowerCase();/^[a-z]$/.test(t)&&(r.playerTransparencyKey=t,n("playerTransparencyKey",r.playerTransparencyKey),c("Player transparency key set to '".concat(t.toUpperCase(),"'"),"enabled"))})),i.UI.inputs.menuKey&&i.UI.inputs.menuKey.addEventListener("input",(function(e){var t=e.target.value.toLowerCase();/^[a-z]$/.test(t)&&(r.menuKey=t,n("menuKey",r.menuKey),c("Menu toggle key set to '".concat(t.toUpperCase(),"'"),"enabled"))})),i.UI.inputs.waterColor&&i.UI.inputs.waterColor.addEventListener("input",(function(e){r.customWaterColor=e.target.value,n("waterColorValue",r.customWaterColor),g(),c("Water color updated","enabled")})),i.UI.inputs.spinSpeedRange&&i.UI.inputs.spinSpeedValue&&i.UI.inputs.spinSpeedRange.addEventListener("input",(function(e){var t=parseInt(e.target.value);r.spinSpeed=t,i.UI.inputs.spinSpeedValue.textContent=t,v(i.UI.inputs.spinSpeedRange,i.UI.inputs.spinSpeedValue),n("spinSpeed",r.spinSpeed)})),i.UI.inputs.themeColor&&i.UI.inputs.themeColor.addEventListener("input",(function(e){x(e.target.value)})),i.UI.inputs.backgroundOpacity&&i.UI.inputs.backgroundOpacity.addEventListener("input",(function(e){!function(e){r.uiBackgroundOpacity=e,n("uiBackgroundOpacity",e),document.documentElement.style.setProperty("--bg-opacity",e);var t=document.getElementById("opacityValue");t&&(t.textContent=Math.round(100*e)+"%")}(parseInt(e.target.value)/100)})),i.UI.inputs.angleMode&&i.UI.inputs.angleMode.addEventListener("change",(function(e){r.angleMode=parseInt(e.target.value),n("angleMode",r.angleMode);c("Angle mode set to: ".concat(["Ease-out","Linear","Ease-in","Instant"][r.angleMode]),"enabled")})),document.querySelectorAll(".rgz-feature").forEach((function(e){var n=e.querySelector(".rgz-feature-header"),t=e.querySelector(".rgz-feature-content"),a=e.querySelector('input[type="checkbox"]');if(n&&t&&n.addEventListener("click",(function(n){n.target.closest(".rgz-switch")||n.target.closest(".rgz-dropdown")||n.target.closest(".rgz-text-input")||n.target.closest(".rgz-color-picker")||e.classList.toggle("expanded")})),a&&t){var i=a.id,o={waterSpamToggle:"waterSpamEnabled",spinSpeedToggle:"spinSpeedEnabled"};o[i]&&r[o[i]]?e.classList.add("expanded"):e.classList.remove("expanded")}}))};function w(e){a()||(e.key.toLowerCase()===r.menuKey&&(r.menuVisible=!r.menuVisible,i.UI.menu&&(i.UI.menu.style.display=r.menuVisible?"block":"none",r.menuVisible&&r.draggingEnabled&&(i.UI.menu.removeEventListener("mousedown",dragStart),i.UI.menu.addEventListener("mousedown",dragStart))),n("toggleMenu",r.menuVisible),c(r.menuVisible?"Menu visibility enabled":"Menu visibility disabled",r.menuVisible?"enabled":"disabled")),e.key.toLowerCase()===r.waterSpamKey&&r.waterSpamEnabled&&!i.waterSpamActive&&(i.waterSpamActive=!0,i.waterSpamInterval&&clearInterval(i.waterSpamInterval),i.waterSpamInterval=setInterval((function(){var e=document.activeElement||document.body,n=new KeyboardEvent("keydown",{key:"s",code:"KeyS",keyCode:83,which:83,bubbles:!0}),t=new KeyboardEvent("keyup",{key:"s",code:"KeyS",keyCode:83,which:83,bubbles:!0});e.dispatchEvent(n),setTimeout((function(){return e.dispatchEvent(t)}),5)}),10)),"Escape"===e.key&&r.lockEnabled&&(i.mouseLocked=!i.mouseLocked,c(i.mouseLocked?"Mouse locked":"Mouse unlocked",i.mouseLocked?"enabled":"disabled")),e.key.toLowerCase()===r.playerTransparencyKey&&(r.playerTransparencyEnabled=!r.playerTransparencyEnabled,n("playerTransparencyToggle",r.playerTransparencyEnabled),h(),c(r.playerTransparencyEnabled?"Player transparency enabled":"Player transparency disabled",r.playerTransparencyEnabled?"enabled":"disabled")))}function k(e){e.key.toLowerCase()===r.waterSpamKey&&r.waterSpamEnabled&&(i.waterSpamActive=!1,u())}function I(e){i.mouseLocked&&e.stopImmediatePropagation()}function E(){if(r.showNextXPEnabled&&i.UI.xpDisplay)try{if(void 0===e.a0_0x102430||!e.a0_0x102430)return void(i.UI.xpDisplay.textContent="Loading XP...");i.UI.xpDisplay.style.right="5px",i.UI.xpDisplay.style.top="266px",i.UI.xpDisplay.style.left="auto";var n=e.a0_0x102430._text||"",t=n.match(/([0-9.,]+[KMB]?) xp.*?\(([0-9.,]+[KMB]?) xp/i);if(t){var a,o=function(e){try{var n=e.replace(/,/g,"");return n=n.endsWith("K")||n.endsWith("k")?1e3*parseFloat(n.slice(0,-1)):n.endsWith("M")||n.endsWith("m")?1e6*parseFloat(n.slice(0,-1)):n.endsWith("B")||n.endsWith("b")?1e9*parseFloat(n.slice(0,-1)):parseFloat(n)}catch(e){return console.error("Error parsing XP value:",e),0}},s=o(t[1]),l=o(t[2])-s;a=l>=1e9?(l/1e9).toFixed(1)+"B":l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":Math.floor(l),i.UI.xpDisplay.textContent="Next: ".concat(a," XP"),i.UI.xpDisplay.style.display="block"}else i.UI.xpDisplay.textContent="Next: N/A"}catch(e){console.error("Error updating XP display:",e),i.UI.xpDisplay.textContent="XP Error"}}function U(){function n(e){return e*(Math.PI/180)}if(!(e.GameObj&&e.Animal&&e.GameObj.prototype&&e.Animal.prototype))return console.log("[RGZ Modpack] Game objects not found, retrying in 1s..."),void setTimeout(U,1e3);e.GameObj.nAngle=0,e.Animal.nAngle=0;var t=e.GameObj.prototype.updateAngle;e.GameObj.prototype.updateAngle=function(e){t&&"function"==typeof t&&t.call(this,e);var a=14==this.oType?180:90;if(3==r.angleMode)this.angle=n(e+a);else{var i=n(e+a);this.oAngle=this.angle,this.nAngle=i,this.firstPosUpd&&(this.oAngle=this.nAngle=this.angle=i)}};var a=e.Animal.prototype.updateAngle;e.Animal.prototype.updateAngle=function(e){a&&"function"==typeof a&&a.call(this,e);var t=n(e-90);this.oAngle=this.angle,this.nAngle=t,this.firstPosUpd&&(this.oAngle=this.angle=this.nAngle=t)},e.GameObj.prototype.lerpAngle=function(){if(this.angle!==this.nAngle){var e,n;switch(e=r.spinSpeedEnabled?i.deltaTime/(1e3/r.spinSpeed):1,this.angleDelta=function(e,n){for(var t=n-e;t>Math.PI;)t-=2*Math.PI;for(;t<-Math.PI;)t+=2*Math.PI;return t}(this.angle,this.nAngle)||0,r.angleMode){case 1:n=this.angleDelta*Math.min(.1*e,1);break;case 2:n=this.angleDelta*Math.min(1,1-Math.pow(2,-.1*e));break;case 3:n=this.angleDelta;break;default:n=this.angleDelta*Math.min(1,1-Math.pow(.9,e))}this.angle+=n,Math.abs(this.angleDelta)<.01&&(this.angle=this.nAngle)}},requestAnimationFrame((function n(t){if(0===i.lastFrameTime&&(i.lastFrameTime=t),i.deltaTime=t-i.lastFrameTime,i.lastFrameTime=t,i.deltaTime>100&&(i.deltaTime=16.7),e.gameObjsByID)for(var a in e.gameObjsByID){var r=e.gameObjsByID[a];r&&"function"==typeof r.lerpAngle&&r.lerpAngle()}requestAnimationFrame(n)})),console.log("[RGZ Modpack] Spin speed functionality initialized")}function S(){var e;if(s(),function(){var e=document.createElement("div");e.className="rgz-notification",e.style.opacity="0",e.style.display="none",document.body.appendChild(e),i.UI.notification=e;var n=document.createElement("div");n.id="rgz-xp-display",n.style.display=r.showNextXPEnabled?"block":"none",document.body.appendChild(n),i.UI.xpDisplay=n;var t='\n  <div class="rgz-container" id="rgz-menu">\n    <div class="rgz-panel">\n      <div class="rgz-header">\n        <div class="rgz-title">\n          <div class="rgz-title-main">RGZ</div>\n          <div class="rgz-title-sub">Modpack</div>\n        </div>\n        <div class="rgz-actions">\n          <button class="rgz-action-btn" id="rgz-settings-btn" title="UI Settings">⚙️</button>\n        </div>\n      </div>\n\n      \x3c!-- Settings Panel --\x3e\n      <div class="rgz-settings-panel" id="rgz-settings-panel">\n        <div class="rgz-settings-title">UI Customization</div>\n\n        <div class="rgz-settings-row">\n          <div class="rgz-settings-label">Theme Color</div>\n          <input type="color" id="uiThemeColorPicker" value="'.concat(r.uiThemeColor,'" class="rgz-color-picker">\n        </div>\n\n        <div class="rgz-theme-swatches">\n          <div class="rgz-theme-swatch" style="background-color: #2196f3;" data-color="#2196f3"></div>\n          <div class="rgz-theme-swatch" style="background-color: #9c27b0;" data-color="#9c27b0"></div>\n          <div class="rgz-theme-swatch" style="background-color: #4caf50;" data-color="#4caf50"></div>\n          <div class="rgz-theme-swatch" style="background-color: #f44336;" data-color="#f44336"></div>\n          <div class="rgz-theme-swatch" style="background-color: #ff9800;" data-color="#ff9800"></div>\n          <div class="rgz-theme-swatch" style="background-color: #e91e63;" data-color="#e91e63"></div>\n          <div class="rgz-theme-swatch" style="background-color: #00bcd4;" data-color="#00bcd4"></div>\n          <div class="rgz-theme-swatch" style="background-color: #ffeb3b;" data-color="#ffeb3b"></div>\n        </div>\n\n        <div class="rgz-slider-container" style="margin-top: 5px;">\n          <div class="rgz-slider-labels">\n            <div class="rgz-slider-label">Background Opacity</div>\n            <div class="rgz-slider-label" id="opacityValue">').concat(Math.round(100*r.uiBackgroundOpacity),'%</div>\n          </div>\n          <input type="range" min="50" max="100" value="').concat(100*r.uiBackgroundOpacity,'" class="rgz-slider-track" id="opacityRange">\n          <div class="rgz-slider-labels">\n            <div class="rgz-slider-label">Transparent</div>\n            <div class="rgz-slider-label">Solid</div>\n          </div>\n        </div>\n      </div>\n\n      <div class="rgz-nav">\n        <button class="rgz-nav-btn active" id="rgz-nav1">Visual</button>\n        <button class="rgz-nav-btn" id="rgz-nav2">Movement</button>\n        <button class="rgz-nav-btn" id="rgz-nav3">Misc</button>\n      </div>\n\n        <div class="rgz-page" id="rgzpage1" style="display:block;">\n          \x3c!-- Visual Features --\x3e\n          <div class="rgz-feature">\n            <div class="rgz-feature-header">\n              <div class="rgz-feature-info">\n                <div class="rgz-feature-title">Zoom</div>\n                <div class="rgz-feature-desc">Zoom with scroll wheel</div>\n              </div>\n              <label class="rgz-switch">\n                <input type="checkbox" id="zoomToggle">\n                <span class="rgz-slider"></span>\n              </label>\n            </div>\n          </div>\n\n          <div class="rgz-feature">\n            <div class="rgz-feature-header">\n              <div class="rgz-feature-info">\n                <div class="rgz-feature-title">All Dragons</div>\n                <div class="rgz-feature-desc">Set all skins to dragons</div>\n              </div>\n              <label class="rgz-switch">\n                <input type="checkbox" id="allDragonsToggle">\n                <span class="rgz-slider"></span>\n              </label>\n            </div>\n          </div>\n\n          <div class="rgz-feature">\n            <div class="rgz-feature-header">\n              <div class="rgz-feature-info">\n                <div class="rgz-feature-title">Objects Transparency</div>\n                <div class="rgz-feature-desc">Toggle objects transparency with key</div>\n              </div>\n              <input type="text" id="objectsTransparencyKeyInput" maxlength="1" class="rgz-text-input">\n            </div>\n          </div>\n\n          <div class="rgz-feature">\n            <div class="rgz-feature-header">\n              <div class="rgz-feature-info">\n                <div class="rgz-feature-title">Player Transparency</div>\n                <div class="rgz-feature-desc">Toggle player transparency with key</div>\n              </div>\n              <input type="text" id="playerTransparencyKeyInput" maxlength="1" class="rgz-text-input">\n            </div>\n          </div>\n\n          <div class="rgz-feature expanded">\n            <div class="rgz-feature-header">\n              <div class="rgz-feature-info">\n                <div class="rgz-feature-title">Water Color</div>\n                <div class="rgz-feature-desc">Change water color (black to reset)</div>\n              </div>\n              <input type="color" id="waterColorPicker" value="').concat(r.customWaterColor,'" class="rgz-color-picker">\n            </div>\n            <div class="rgz-feature-content">\n              <div class="rgz-color-palette" id="waterColorPalette">\n                ').concat(l.map((function(e){return'<div class="rgz-color-swatch" style="background-color: '.concat(e,';" data-color="').concat(e,'"></div>')})).join(""),'\n              </div>\n            </div>\n          </div>\n        </div>\n\n      <div class="rgz-page" id="rgzpage2">\n        \x3c!-- Movement Features --\x3e\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Lock Mouse</div>\n              <div class="rgz-feature-desc">Press ESC to lock/unlock mouse</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="lockMouseToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n        </div>\n\n        <div class="rgz-feature expanded">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Spin Speed</div>\n              <div class="rgz-feature-desc">Change your turn speed</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="spinSpeedToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n          <div class="rgz-feature-content" id="spinSpeedContainer">\n            <div class="rgz-slider-container" style="margin-top: 5px;">\n              <div class="rgz-slider-labels">\n                <div class="rgz-slider-label">TurnSpeed</div>\n                <div class="rgz-slider-label" id="spinSpeedValue">').concat(Math.round(r.spinSpeed),'</div>\n              </div>\n              <input type="range" min="30" max="360" value="').concat(r.spinSpeed,'" class="rgz-slider-track" id="spinSpeedRange">\n              <div class="rgz-slider-labels">\n                <div class="rgz-slider-label">30</div>\n                <div class="rgz-slider-label">360</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Angle Mode</div>\n              <div class="rgz-feature-desc">Animation smoothing type</div>\n            </div>\n            <select class="rgz-dropdown" id="angleModeSelect">\n              <option value="0">Ease-out</option>\n              <option value="1">Linear</option>\n              <option value="2">Ease-in</option>\n              <option value="3">Instant</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div class="rgz-page" id="rgzpage3">\n        \x3c!-- Misc Features --\x3e\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Enable Dragging</div>\n              <div class="rgz-feature-desc">Drag and position the UI</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="dragToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n        </div>\n\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Toggle Menu Key</div>\n              <div class="rgz-feature-desc">Show/Hide the Modpack</div>\n            </div>\n            <input type="text" id="menuKeyInput" maxlength="1" class="rgz-text-input">\n          </div>\n        </div>\n\n        <div class="rgz-feature expanded">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Water Spam</div>\n              <div class="rgz-feature-desc">Spam water/lava by pressing a key</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="waterSpamToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n          <div class="rgz-feature-content">\n            <div class="rgz-settings-row">\n              <div class="rgz-settings-label">Spam Key</div>\n              <input type="text" id="waterSpamKeyInput" maxlength="1" class="rgz-text-input">\n            </div>\n          </div>\n        </div>\n\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Show XP to next Animal</div>\n              <div class="rgz-feature-desc">Display XP remaining</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="showNextXPToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n        </div>\n\n        <div class="rgz-feature">\n          <div class="rgz-feature-header">\n            <div class="rgz-feature-info">\n              <div class="rgz-feature-title">Display Wins</div>\n              <div class="rgz-feature-desc">Display 1v1 wins of all players</div>\n            </div>\n            <label class="rgz-switch">\n              <input type="checkbox" id="displayWinsToggle">\n              <span class="rgz-slider"></span>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  ');document.body.insertAdjacentHTML("beforeend",t),i.UI.menu=document.getElementById("rgz-menu"),i.UI.menu&&(i.UI.menu.style.display="block",r.menuVisible=!0)}(),d(),z(),document.addEventListener("keydown",w),document.addEventListener("keyup",k),document.addEventListener("mousemove",I,!0),(e=document.createElement("script")).textContent="\n    (function() {\n      'use strict';\n\n      let isOpacityEnabled = ".concat(r.objectsTransparencyEnabled,";\n      let originalDrawMethod = null;\n      let isInitialized = false;\n\n      function isUserInChat() {\n        const chatInput = document.getElementById('chatinput') || document.querySelector('input[type=\"text\"]');\n        return chatInput && document.activeElement === chatInput;\n      }\n\n      function checkGameReady() {\n        return typeof window.a0_0xf2acbb !== 'undefined' && \n               typeof GameObj !== 'undefined' &&\n               typeof GameObj.prototype.draw === 'function';\n      }\n\n      const checkInterval = setInterval(function() {\n        if (checkGameReady()) {\n          clearInterval(checkInterval);\n          isInitialized = true;\n          console.log(\"Objects transparency: Game ready\");\n\n          if (isOpacityEnabled) {\n            setupObjectsOpacity();\n            window.dispatchEvent(new CustomEvent('rgz-objects-transparency', {\n              detail: { enabled: true, initialized: true }\n            }));\n          }\n        }\n      }, 500);\n\n      function setupObjectsOpacity() {\n        if (!isInitialized && !checkGameReady()) {\n          console.log(\"Objects transparency: Game not ready yet\");\n          return false;\n        }\n\n        try {\n          window.a0_0xf2acbb.forEach(obj => obj.isStatic = true);\n\n          originalDrawMethod = GameObj.prototype.draw;\n\n          GameObj.prototype.draw = function(context) {\n            if (isOpacityEnabled) {\n              const canvas = document.querySelector('canvas');\n              const ctx = canvas.getContext('2d');\n\n              const staticObjectTypes = [4, 6, 27, 101, 11, 8, 3, 17];\n\n              if (this.isStatic && staticObjectTypes.includes(this.oType)) {\n                ctx.save();\n                ctx.globalAlpha = 0.3;\n                originalDrawMethod.call(this, context);\n                ctx.restore();\n              } else {\n                originalDrawMethod.call(this, context);\n              }\n            } else {\n              originalDrawMethod.call(this, context);\n            }\n          };\n          return true;\n        } catch(e) {\n          console.error(\"Error setting up objects transparency:\", e);\n          return false;\n        }\n      }\n\n      function restoreOriginalDrawMethod() {\n        if (originalDrawMethod) {\n          GameObj.prototype.draw = originalDrawMethod;\n        }\n      }\n\n      window.addEventListener('rgz-update-objects-transparency-key', function(event) {\n        if (event.detail && event.detail.key) {\n          console.log(\"Objects transparency key updated to: \" + event.detail.key);\n        }\n      });\n\n      document.addEventListener('keydown', function(event) {\n        if (isUserInChat()) return;\n\n        const currentKey = localStorage.getItem('rgz_objectsTransparencyKey');\n        const parsedKey = currentKey ? JSON.parse(currentKey).toLowerCase() : 'y';\n\n        if (event.key.toLowerCase() === parsedKey) {\n          isOpacityEnabled = !isOpacityEnabled;\n\n          if (isOpacityEnabled) {\n            const success = setupObjectsOpacity();\n            if (success) {\n              window.dispatchEvent(new CustomEvent('rgz-objects-transparency', { detail: { enabled: true } }));\n            } else {\n              isOpacityEnabled = false;\n            }\n          } else {\n            restoreOriginalDrawMethod();\n            window.dispatchEvent(new CustomEvent('rgz-objects-transparency', { detail: { enabled: false } }));\n          }\n        }\n      });\n\n      window.rgzObjectsTransparency = {\n        toggle: function() {\n          if (isUserInChat()) return false;\n\n          const wasEnabled = isOpacityEnabled;\n          isOpacityEnabled = !isOpacityEnabled;\n\n          if (isOpacityEnabled) {\n            const success = setupObjectsOpacity();\n            if (success) {\n              window.dispatchEvent(new CustomEvent('rgz-objects-transparency', { detail: { enabled: true } }));\n            } else {\n              isOpacityEnabled = wasEnabled;\n              return false;\n            }\n          } else {\n            restoreOriginalDrawMethod();\n            window.dispatchEvent(new CustomEvent('rgz-objects-transparency', { detail: { enabled: false } }));\n          }\n\n          return true;\n        },\n        isEnabled: function() {\n          return isOpacityEnabled;\n        },\n        isReady: function() {\n          return isInitialized;\n        }\n      };\n    })();\n  "),document.body.appendChild(e),window.addEventListener("rgz-objects-transparency",(function(e){e.detail&&void 0!==e.detail.enabled&&(r.objectsTransparencyEnabled=e.detail.enabled,n("objectsTransparencyToggle",r.objectsTransparencyEnabled),e.detail.initialized||c(r.objectsTransparencyEnabled?"Objects transparency enabled":"Objects transparency disabled",r.objectsTransparencyEnabled?"enabled":"disabled"))})),h(),r.zoomEnabled){var t=document.getElementById("gCanvas");t&&t.addEventListener("wheel",b,!0)}m(),U(),r.displayWinsEnabled&&y(),setInterval(E,500),setInterval(g,500),setTimeout((function(){var e=document.getElementById("rgz-menu");e&&(e.style.display="block",r.menuVisible=!0,n("toggleMenu",!0),console.log("[RGZ Modpack] Menu visibility enforced"))}),500),console.log("RGZ Modpack 1.0 loaded")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",S):S()})();
